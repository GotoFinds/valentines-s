<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Celebrate Valentine's Day with love and joy!">
    <meta name="author" content="gotofinds.shop">
    <title>Valentine's Day Gift Finder ‚ù§Ô∏è</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><text y='24' font-size='24' fill='red'>&#10084;</text></svg>">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Heart Loading Animation */
        .heart-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .heart {
            width: 50px;
            height: 50px;
            background: #ff4b6e;
            position: relative;
            transform: rotate(45deg);
            animation: heartbeat 2s infinite;
        }

        .heart:before,
        .heart:after {
            content: "";
            width: 50px;
            height: 50px;
            background: #ff4b6e;
            border-radius: 50%;
            position: absolute;
        }

        .heart:before {
            left: -25px;
        }

        .heart:after {
            top: -25px;
        }

        @keyframes heartbeat {
            0% { transform: rotate(45deg) scale(0.8); }
            5% { transform: rotate(45deg) scale(0.9); }
            10% { transform: rotate(45deg) scale(0.8); }
            15% { transform: rotate(45deg) scale(1); }
            50% { transform: rotate(45deg) scale(0.8); }
            100% { transform: rotate(45deg) scale(0.8); }
        }

        /* Dark Mode Styles */
        [data-theme="dark"] {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        [data-theme="dark"] .bg-white {
            background-color: #2d2d2d;
        }

        [data-theme="dark"] .text-gray-800,
        [data-theme="dark"] .text-gray-900,
        [data-theme="dark"] .text-gray-600,
        [data-theme="dark"] .text-gray-500 {
            color: #ffffff !important;
        }

        [data-theme="dark"] .hover\:bg-gray-50:hover {
            background-color: #3d3d3d;
        }

        [data-theme="dark"] .border {
            border-color: #404040;
        }

        [data-theme="dark"] .bg-white {
            background-color: #2d2d2d;
        }

        [data-theme="dark"] .bg-gray-100 {
            background-color: #333333;
        }

        [data-theme="dark"] .bg-pink-50 {
            background-color: #3d2d2d;
        }

        [data-theme="dark"] .bg-yellow-50 {
            background-color: #3d3525;
        }

        @keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}
.animate-pulse {
  animation: pulse 1.5s infinite;
}
@keyframes slideIn {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}
    </style>
</head>
<body >
    <!-- Loading Animation -->
    <div id="loader" class="heart-loader">
        <div class="heart"></div>
    </div>

    <!-- Theme Toggle -->
    <button id="themeToggle" class="fixed top-2 right-2 p-2 rounded-full bg-gray-200 dark:bg-gray-700 z-50">
        <svg class="w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path class="sun" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            <path class="moon" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg>
    </button>

    <!-- Valentine's Countdown -->
    <div id="countdownContainer" class="fixed bottom-2 right-2">
        <!-- Expanded countdown view -->
        <div id="countdownExpanded" class="bg-pink-100 dark:bg-pink-900 p-2 rounded-lg shadow-lg">
            <div class="flex justify-between items-center">
                <h3 class="text-sm font-semibold">Valentine's Day Countdown</h3>
                <button onclick="closeCountdown()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="countdown" class="text-sm text-pink-600 dark:text-pink-300 mt-2"></div>
        </div>
        
        <!-- Collapsed icon view -->
        <button id="countdownCollapsed" onclick="showCountdown()" class="hidden bg-pink-100 dark:bg-pink-900 p-2 rounded-full shadow-lg">
            <svg class="w-5 h-5 text-pink-600 dark:text-pink-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        </button>
    </div>
    <script>
        // Auto hide countdown after 15 seconds
        setTimeout(() => {
            closeCountdown();
        }, 15000);

        function closeCountdown() {
            document.getElementById('countdownExpanded').classList.add('hidden');
            document.getElementById('countdownCollapsed').classList.remove('hidden');
        }

        function showCountdown() {
            document.getElementById('countdownExpanded').classList.remove('hidden');
            document.getElementById('countdownCollapsed').classList.add('hidden');
        }
    </script>

    <!-- Gift Quiz Modal -->
    <div id="quizModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg max-w-md w-full">
            <h2 class="text-lg  mb-4">Find the Perfect Gift</h2>
            <div id="quizContent"></div>
        </div>
    </div>

    <nav class="relative w-full bg-white">
        <div class="absolute inset-0 opacity-10">
            <div class="absolute inset-0 bg-gradient-to-b from-opacity-40 to-opacity-10" style="background-image: url('data:image/svg+xml,%3Csvg width=\'20\' height=\'20\' viewBox=\'0 0 20 20\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'%23000000\' fill-opacity=\'0.4\' fill-rule=\'evenodd\'%3E%3Ccircle cx=\'3\' cy=\'3\' r=\'3\'/%3E%3Ccircle cx=\'13\' cy=\'13\' r=\'3\'/%3E%3C/g%3E%3C/svg%3E');"></div>
        </div>
        <div class="relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="flex h-24 items-center justify-center">
                <div class="flex-shrink-0">
                    <img class="h-12 w-12 sm:h-16 sm:w-16 rounded" src="https://th.bing.com/th/id/R.c43b4460cd43b5243846c6ff5b522b58?rik=7gDw6YDlZ5TDSA&riu=http%3a%2f%2f2.bp.blogspot.com%2f--kuFE_ikuLo%2fU9fTBG6ozhI%2fAAAAAAAALJ8%2fS9yUX0u3eDM%2fs1600%2fdarling-valentine-smiley.png&ehk=yP82vJchADNZSdHeZ2NnBR9Hx%2binP4Mvw2xzC4cqXK4%3d&risl=&pid=ImgRaw&r=0" alt="Logo">
                </div>
                <div class="flex flex-col items-center">
                    <h1 class="font-serif text-xl sm:text-3xl font-extrabold tracking-tight text-gray-900">
                        VALENTINE'S GIFT
                    </h1>
                    <span class="text-xs sm:text-sm font-medium text-gray-500">Find Your Perfect Gift</span>
                </div>
            </div>
        </div>
    </nav>
    <div class="w-full  bg-white">
        <div class="animate-slide-in w-full bg-pink-50 border-b border-pink-100 overflow-hidden">
          <div class="flex items-center justify-center space-x-2 py-2 text-sm text-pink-700">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="text-pink-500 animate-pulse"
              width="14"
              height="14"
              fill="currentColor"
              viewBox="0 0 16 16"
            >
              <path d="M8 15s-7-4.686-7-8.5A4.5 4.5 0 0 1 8 2a4.5 4.5 0 0 1 7 4.5C15 10.314 8 15 8 15z" />
            </svg>
            <span>Spread love and joy this Valentine's Day! üíù</span>
          </div>
        </div>
      </div>      
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 my-6">
        <div class="flex gap-4">
            <div class="relative w-48">
                <button id="categoryDropdown" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white flex items-center justify-between"
                        onclick="toggleCategoryDropdown()">
                    <span id="selectedCategory">All Categories</span>
                    <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div id="categoryList" 
                     class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg hidden">
                </div>
            </div>

            <div class="relative flex-1">
                <input type="text" 
                       id="searchInput" 
                       placeholder="Search products by name or code..." 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"
                       oninput="handleSearchInput()">
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                    <svg class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                    </svg>
                </div>

                <div id="searchSuggestions" 
                     class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg hidden max-h-60 overflow-y-auto">
                </div>
            </div>
        </div>
    </div>
    
    <div id="app" style="z-index: 999;"></div>
    <script>
        // Remove loader after content loads
        window.addEventListener('load', () => {
            document.getElementById('loader').style.display = 'none';
        });

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.documentElement.setAttribute('data-theme', 
                document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'
            );
        });

        // Valentine's Countdown
        function updateCountdown() {
            const valentine = new Date(new Date().getFullYear(), 1, 14);
            if (valentine < new Date()) {
                valentine.setFullYear(valentine.getFullYear() + 1);
            }
            
            const now = new Date();
            const diff = valentine - now;
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            
            document.getElementById('countdown').textContent = 
                `${days}d ${hours}h until Valentine's!`;
        }
        setInterval(updateCountdown, 1000);

        // Gift Quiz
        const quizQuestions = [
            {
                question: "What's their favorite color?",
                options: ["Red", "Pink", "Blue", "Purple"]
            },
            {
                question: "What's their style?",
                options: ["Classic", "Modern", "Romantic", "Practical"]
            },
            // Add more questions...
        ];

        let currentQuestion = 0;
        let quizAnswers = [];

        function startQuiz() {
            document.getElementById('quizModal').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const question = quizQuestions[currentQuestion];
            document.getElementById('quizContent').innerHTML = `
                <p class="mb-4">${question.question}</p>
                <div class="space-y-2">
                    ${question.options.map(option => `
                        <button onclick="answerQuestion('${option}')" 
                                class="w-full p-2 text-left hover:bg-pink-100 rounded">
                            ${option}
                        </button>
                    `).join('')}
                </div>
            `;
        }

        function answerQuestion(answer) {
            quizAnswers.push(answer);
            if (currentQuestion < quizQuestions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showRecommendations();
            }
        }

        function showRecommendations() {
            // Implement gift recommendations based on answers
            const recommendations = getRecommendations(quizAnswers);
            document.getElementById('quizContent').innerHTML = `
                <h3 class="text-lg font-bold mb-4">Your Perfect Gift Recommendations</h3>
                <div class="space-y-4">
                    ${recommendations.map(item => `
                        <div class="border p-4 rounded">
                            <h4 class="font-semibold">${item.name}</h4>
                            <p class="text-sm text-gray-600">${item.description}</p>
                        </div>
                    `).join('')}
                </div>
                <button onclick="closeQuiz()" 
                        class="mt-4 w-full bg-pink-500 text-white p-2 rounded">
                    Close
                </button>
            `;
        }

        const productsData = [
            {
                id: 1,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
            {
                id: 2,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
            {
                id: 3,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
            {
                id: 4,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
            {
                id: 5,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
            {
                id: 6,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
            {
                id: 7,
                name: "Classic Leather Sneakers",
                category: "Footwear",
                variants: [
                    {
                        id: 1,
                        name: "White",
                        code: "SN001-WHT",
                        images: [
                            { url: "https://images.meesho.com/images/products/443449067/h1du9_512.webp", alt: "White sneaker front view" },
                            { url: "https://images.meesho.com/images/products/443449067/yktv9_512.webp", alt: "White sneaker side view" },
                            { url: "https://images.meesho.com/images/products/443449067/wro1j_512.webp", alt: "White sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    },
                    {
                        id: 2,
                        name: "Black",
                        code: "SN001-BLK",
                        images: [
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker front view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker side view" },
                            { url: "https://ae-pic-a1.aliexpress-media.com/kf/S4dfcb3b9e72048a2ac567d463cbd4273D.jpg_960x960q75.jpg_.avif", alt: "Black sneaker back view" }
                        ],
                        affiliateLinks: [{
                            name: "Amazon",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/4/4a/Amazon_icon.svg",
                            url: "#",
                            price: "$99.99",
                            coupon: {
                                code: "SAVE20",
                                discount: "20% OFF"
                            },
                            rating: {
                                score: 4.5,
                                totalReviews: 2543
                            },
                            delivery: {
                                type: "Prime",
                                estimatedDays: "2-3 days",
                                isFree: true
                            }
                        }, {
                            name: "Nike",
                            logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg",
                            url: "#",
                            price: "$89.99",
                            coupon: {
                                code: "NIKE15",
                                discount: "15% OFF"
                            },
                            rating: {
                                score: 4.8,
                                totalReviews: 1234
                            },
                            delivery: {
                                type: "Standard",
                                estimatedDays: "3-5 days",
                                isFree: false
                            }
                        }]
                    }
                ]
            },
        
        ];
        let selectedCategory = null;
        function filterByCategory(category) {
        selectedCategory = category === "All Categories" ? null : category; 
        document.getElementById("selectedCategory").textContent = 
            `Category: ${selectedCategory || "All Categories"}`;
        applyFilters(); 
        }
        function initializeCategoryFilter() {
            const categories = ['All Categories', ...new Set(productsData.map(product => product.category))];
            const categoryList = document.getElementById('categoryList');
            
            categoryList.innerHTML = categories.map(category => `
                <div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" 
                     onclick="selectCategory('${category}')">
                    ${category}
                </div>
            `).join('');
        }
        function toggleCategoryDropdown() {
            const dropdown = document.getElementById('categoryList');
            dropdown.classList.toggle('hidden');
        }

        function selectCategory(category) {
            selectedCategory = category;
            document.getElementById('selectedCategory').textContent = category;

            // Re-hide the dropdown after a category is selected
            const dropdown = document.getElementById('categoryList');
            dropdown.classList.add('hidden');
            
            filterByCategory(selectedCategory);
        }

        function handleSearchInput() {
            applyFilters(); // Apply filters to update the display
        }

        // Function to apply both category and search filters
        function applyFilters() {
            const query = document.getElementById('searchInput').value.toLowerCase(); // Get search query

            const filteredProducts = productsData.filter(product => {
                // Filter by selected category (if any) and search query
                const matchesCategory = !selectedCategory || product.category === selectedCategory;
                const matchesSearch =
                    product.name.toLowerCase().includes(query) || // Search by product name
                    product.variants.some(variant => variant.code.toLowerCase().includes(query)); // Search by variant code
                return matchesCategory && matchesSearch;
            });
            renderApp(filteredProducts); 
        }


        document.addEventListener('DOMContentLoaded', () => {
            initializeCategoryFilter();
            renderApp();
        });


        const appContainer = document.getElementById('app');
        let selectedVariants = productsData.reduce(
            (acc, product) => ({
                ...acc,
                [product.id]: { variant: product.variants[0], currentIndex: 0 }
            }),
            {}
        );

        function handleVariantSelect(productId, variantId) {
            const product = productsData.find(p => p.id === productId);
            const variant = product.variants.find(v => v.id === variantId);

            if (product && variant) {
                selectedVariants[productId] = { variant, currentIndex: 0 };
                renderApp(); // Re-render after updating the selected variant
            }
        }

        function renderApp(filteredProducts = productsData) {
            appContainer.innerHTML = `
                <div class="min-h-full w-full bg-white ">
                    <div class="mx-auto max-w-7xl">
                        <div class="grid gap-2 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3">
                            ${filteredProducts.map(product => `
                                <div class=" rounded-xl p-0.5 bg-transparent">
                                    <div class="flex justify-between items-center mb-4">
                                            <h2 class="text-2xl font-semibold text-gray-800 tracking-tight hover:text-gray-900 transition-colors duration-200">
                                                ${product.name}
                                            </h2>
                                            <span class="text-sm text-gray-500">${product.category}</span>
                                        </div>
                                        <div class="text-sm text-gray-500 mb-2">
                                            Codes: ${product.variants.map(v => v.code).join(', ')}
                                        </div>
                                        <div class="space-y-4">
                                        <div id="gallery-${product.id}">
                                            ${createImageGalleryHTML(product.id)}
                                        </div>
                                        <div class="flex gap-2 overflow-x-auto">
                                            ${product.variants.map(variant => `
                                                <button onclick="handleVariantSelect(${product.id}, ${variant.id})" class="flex-none ${
                                                    selectedVariants[product.id].variant.id === variant.id ? "ring-2 ring-black" : ""
                                                }">
                                                    <img src="${variant.images[0].url}" alt="${variant.name}" class="h-16 w-16 rounded-md object-cover object-center" />
                                                </button>
                                            `).join('')}
                                        </div>
                                    </div>
                                     <div>
                                        ${createAffiliateLinkHTML(product.id)}
                                    </div>
                                 </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function formatReviewCount(count) {
            if (count >= 1000000) {
                return `${(count / 1000000).toFixed(1)}M`;
            }
            if (count >= 1000) {
                return `${(count / 1000).toFixed(1)}k`;
            }
            return count;
        }

        function renderStars(rating) {
            return Array.from({ length: 5 }, (_, index) => {
                const fullStars = Math.floor(rating);
                const partialFill = rating - fullStars;
                const currentStarFill = index === fullStars ? partialFill * 100 : 0;
                const isFullStar = index < fullStars;
                const isPartialStar = index === fullStars && partialFill > 0;
                
                return `
                    <svg class="h-4 w-4 ${isFullStar || isPartialStar ? "text-yellow-400" : "text-gray-300"}" 
                         viewBox="0 0 24 24" 
                         fill="${isFullStar ? "currentColor" : "none"}"
                         stroke="currentColor">
                        ${isPartialStar ? `
                            <defs>
                                <linearGradient id="partial-${index}">
                                    <stop offset="${currentStarFill}%" stop-color="currentColor" />
                                    <stop offset="${currentStarFill}%" stop-color="transparent" />
                                </linearGradient>
                            </defs>
                        ` : ''}
                        <path stroke-linecap="round" 
                              stroke-linejoin="round" 
                              stroke-width="2"
                              fill="${isPartialStar ? `url(#partial-${index})` : ''}"
                              d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                    </svg>
                `;
            }).join('');
        }

        function createAffiliateLinkHTML(productId) {
            const product = productsData.find(p => p.id === productId);
            const AffiliateLink = product.variants.find(v => v.id === selectedVariants[productId].variant.id).affiliateLinks;

            return `
                <h3 class="mb-3 font-semibold">Available From</h3>
                <div class="space-y-3">
                    ${AffiliateLink.map(link => `
                        <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="flex flex-col w-full rounded-lg border p-3 hover:bg-gray-50 space-y-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <img src="${link.logo}" alt="${link.name}" class="h-8 w-8 object-contain" />
                                    <span class="font-medium">${link.name}</span>
                                </div>
                                ${link.coupon ? `
                                    <div class="flex items-center gap-2 bg-yellow-50 px-3 py-1 rounded-lg">
                                        <svg class="h-5 w-5 text-yellow-600" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M5.5 3A2.5 2.5 0 003 5.5v2.879a2.5 2.5 0 00.732 1.767l6.5 6.5a2.5 2.5 0 003.536 0l2.878-2.878a2.5 2.5 0 000-3.536l-6.5-6.5A2.5 2.5 0 008.38 3H5.5zM6 7a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                                        </svg>
                                        <div class="flex flex-col">
                                            <span class="text-sm font-semibold text-yellow-800">${link.coupon.code}</span>
                                            <span class="text-xs text-yellow-600">${link.coupon.discount}</span>
                                        </div>
                                    </div>
                                ` : ''}
                                <span class="font-semibold">${link.price}</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <div class="flex items-center gap-1">
                                    <div class="flex items-center">
                                        ${renderStars(link.rating.score)}
                                    </div>
                                    <span class="text-gray-600">
                                        (${formatReviewCount(link.rating.totalReviews)} reviews)
                                    </span>
                                </div>
                                <div class="flex items-center gap-3 text-gray-600">
                                    <div class="flex items-center gap-1">
                                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span>
                                            ${link.delivery.isFree ? "Free delivery" : link.delivery.type}
                                        </span>
                                    </div>
                                    <div class="flex items-center gap-1">
                                        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M12 6v6l4 2"></path>
                                        </svg>
                                        <span>${link.delivery.estimatedDays}</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    `).join('')}
                </div>
            `;
        }

        function createImageGalleryHTML(productId) {
            const { variant, currentIndex } = selectedVariants[productId];
            const images = variant.images;

            const indicatorsHTML = images.map((_, index) => `
                <button class="w-2 h-2 rounded-full transition-all ${currentIndex === index ? "bg-black" : "bg-gray-300"}"
                        aria-label="Go to image ${index + 1}" onclick="updateGallery(${productId}, ${index})">
                </button>
            `).join('');

            return `
                <div class="relative w-full" style="aspect-ratio:1/1">
                    <div class="relative aspect-square overflow-hidden rounded-lg bg-gray-100">
                        <img src="${images[currentIndex].url}" alt="${images[currentIndex].alt}" class="h-full w-full object-cover object-center" />
                        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-2">${indicatorsHTML}</div>
                        <button class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-white p-2 rounded-full" aria-label="Previous"
                                onclick="prevImage(${productId})">&lt;</button>
                        <button class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-white p-2 rounded-full" aria-label="Next"
                                onclick="nextImage(${productId})">&gt;</button>
                    </div>
                </div>
            `;
        }

        function updateGallery(productId, index) {
            selectedVariants[productId].currentIndex = index;
            document.getElementById(`gallery-${productId}`).innerHTML = createImageGalleryHTML(productId);
        }

        function prevImage(productId) {
            const variantData = selectedVariants[productId];
            variantData.currentIndex = (variantData.currentIndex - 1 + variantData.variant.images.length) % variantData.variant.images.length;
            updateGallery(productId, variantData.currentIndex);
        }

        function nextImage(productId) {
            const variantData = selectedVariants[productId];
            variantData.currentIndex = (variantData.currentIndex + 1) % variantData.variant.images.length;
            updateGallery(productId, variantData.currentIndex);
        }

        renderApp();

        // Add wishlist functionality to product cards
        function addToWishlist(productId) {
            const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
            if (!wishlist.includes(productId)) {
                wishlist.push(productId);
                localStorage.setItem('wishlist', JSON.stringify(wishlist));
                updateWishlistUI();
            }
        }
    </script>
</body>
</html>
